sap.ui.define(["sap/ui/core/mvc/Controller","project1/libs/call","sap/m/MessageBox","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,n,i,o,r){"use strict";return e.extend("project1.controller.View1",{onInit:function(){let e=setInterval(function(){if(this.getView().getModel("restaurantsModel")){this.getRestaurants();clearInterval(e)}}.bind(this))},getRestaurants:function(){var e=this.getOwnerComponent().getModel("restaurantsModel");var n=this.getView().byId("selectRestaurant");return new Promise(function(i,o){var r=function(e,t){console.log(e);var o=new sap.ui.model.json.JSONModel(e.results);o.setSizeLimit(3e3);n.setModel(o);var r=new sap.ui.core.Item({key:"{Id_restaurant}",text:"{Name}"});n.bindAggregation("items","/",r);i(e)}.bind(this);var s=function(e){console.log(e);o(e)};t.get(this,e,"/getRestaurants",[],{},r,s,null)}.bind(this))},getRestaurantFilterByCity:function(){var e=this.getOwnerComponent().getModel("restaurantsModel");var n=function(e,t){var n=this.getView().getModel("modelTable");if(!n){n=new sap.ui.model.json.JSONModel;n.setSizeLimit(3e3);this.getView().setModel(n,"modelTable")}var i={idEX:e.results[0].Id_restaurant,nameEX:e.results[0].Name,typeEX:e.results[0].Type,openHourEX:e.results[0].Opening_hour,closeHourEX:e.results[0].Closing_hour,cityEX:e.results[0].City};this.getView().getModel("modelTable").setProperty("/results",[i])}.bind(this);var i=function(e){console.log(e)};t.get(this,e,"/getCity",[],{City:"Madrid"},n,i,null)},onCreateRestaurant:function(){var e=this.getOwnerComponent().getModel("restaurantsModel");var n=this.getView().byId("id1").getValue();var i=this.getView().byId("id2").getValue();var o=this.getView().byId("id3").getValue();var r=this.getView().byId("id4").getValue();this.formatHour(r);var s=this.getView().byId("id5").getValue();this.formatHour(s);var a=this.getView().byId("id6").getValue();var l={Id_restaurant:n,Name:i,Type:o,Opening_hour:r,Closing_hour:s,City:a};var u=function(e,t){console.log(e);var n=this.getView().getModel("modelTable");if(!n){n=new sap.ui.model.json.JSONModel;n.setSizeLimit(3e3);this.getView().setModel(n,"modelTable")}var i={};i.idEX=e.createRestaurant.restaurant.Id_restaurant;i.nameEX=e.createRestaurant.restaurant.Name;i.typeEX=e.createRestaurant.restaurant.Type;i.openHourEX=e.createRestaurant.restaurant.Opening_hour;i.closeHourEX=e.createRestaurant.restaurant.Closing_hour,i.cityEX=e.createRestaurant.restaurant.City,this.getView().getModel("modelTable").setProperty("/results2",[i])}.bind(this);var d=function(e){console.log(e)};t.create(this,e,"/createRestaurant",l,u,d,{})},formatHour:function(e){if(!e.includes(".")){e+=".000"}return e},getOpinions:function(){var e=this.getOwnerComponent().getModel("restaurantsModel");return new Promise(function(n,i){var o=function(e,t){console.log(e)}.bind(this);var r=function(e){console.log(e);i(e)};t.get(this,e,"/getOpinions",[],{},o,r,null)}.bind(this))},getCustomersNorthwind:function(){var e=this.getOwnerComponent().getModel("restaurantsModel");var n=function(e,t){console.log(e)}.bind(this);var i=function(e){console.log(e)};t.get(this,e,"/Customer",[],{},n,i,null)},getApi:function(){var e=this.getOwnerComponent().getModel("restaurantsModel");var n=function(e,t){console.log(e)}.bind(this);var i=function(e){console.log(e)};t.get(this,e,"/jokesapi",[],{},n,i,null)},getMenus:function(){var e=this.getOwnerComponent().getModel("menusModel");return new Promise(function(n,i){var o=function(e,t){console.log(e)}.bind(this);var r=function(e){console.log(e);i(e)};t.get(this,e,"/getMenus",[],{},o,r,null)}.bind(this))},onCreateMenu:function(){var e=this.getOwnerComponent().getModel("menusModel");var n=this.getView().byId("id7").getValue();var i=this.getView().byId("id8").getValue();var o=this.getView().byId("id9").getValue();var r=this.getView().byId("id10").getValue();var s=this.getView().byId("id11").getValue();var a={Name:n,Price:i,Description:o,Spiciness:r,Availability:s};var l=function(e,t){console.log(e);var n=this.getView().getModel("modelTable2");if(!n){n=new sap.ui.model.json.JSONModel;n.setSizeLimit(3e3);this.getView().setModel(n,"modelTable2")}var i={};i.nameeEX=e.createMenu.menu.Name;i.priceeEX=e.createMenu.menu.Price;i.descriptionnEX=e.createMenu.menu.Description;i.spiceEX=e.createMenu.menu.Spiciness;i.availableEX=e.createMenu.menu.Availability,this.getView().getModel("modelTable2").setProperty("/results2",[i])}.bind(this);var u=function(e){console.log(e)};t.create(this,e,"/createMenu",a,l,u,{})}})});