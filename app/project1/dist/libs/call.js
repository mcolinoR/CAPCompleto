sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device","sap/ui/model/resource/ResourceModel"],function(e,r,s){"use strict";return{get:function(e,r,s,t,a,o,i,n){if(n===undefined||n===null||n===""){n=[]}var u=this;var c=function(r,s){var t=s.headers["sap-message"];if(t&&(JSON.parse(t).severity==="error"||JSON.parse(t).code==="ZPM_MSG/150")){var a={statusCode:"400",statusText:JSON.parse(t).message};u.error(a,e)}else{if(o){o(r,s)}}};var l=function(r){if(i){i(r)}u.error(r,e)};r.read(s,{urlParameters:a,filters:t,sorters:n,success:c,error:l})},create:function(e,r,s,t,a,o,i){var n=this;var u=function(r,s){var t=s.headers["sap-message"];if(t&&(JSON.parse(t).severity==="error"||JSON.parse(t).code==="ZPM_MSG/150")){var o={statusCode:"400",statusText:JSON.parse(s.headers["sap-message"]).message};n.error(o,e)}else{if(s.statusCode.indexOf("20")!==-1){if(a){a(r,s)}}else{var o={statusCode:s.statusCode,statusText:s.statusText};n.error(o,e)}}};var c=function(r){if(o){o(r)}n.error(r,e)};r.create(s,t,{success:u,error:c,urlParameters:i})},update:function(e,r,s,t,a,o,i,n){var u=this;var c=function(r,s){var t=s.headers["sap-message"];if(t&&(JSON.parse(t).severity==="error"||JSON.parse(t).code==="ZPM_MSG/150")){var a={statusCode:"400",statusText:JSON.parse(s.headers["sap-message"]).message};u.error(a,e)}else{if(i){i(r,s)}}};var l=function(r){if(n){n(r)}if(JSON.parse(r.responseText)){if(JSON.parse(r.responseText).error.innererror.statusCode===409){r={statusCode:"400",statusText:JSON.parse(r.responseText).error.innererror.statusText};u.error(r,e)}}else{u.error(r,e)}};r.update(s+"('"+t+"')",a,{success:c,error:l,urlParameters:o})},updateMulti:function(e,r,s,t,a,o,i,n,u){var c=this;var l=function(r,s){var t=s.headers["sap-message"];if(t&&(JSON.parse(t).severity==="error"||JSON.parse(t).code==="ZPM_MSG/150")){var a={statusCode:"400",statusText:JSON.parse(s.headers["sap-message"]).message};c.error(a,e,u)}else{if(i){i(r,s)}}};var p=function(r){if(n){n(r)}c.error(r,e,u)};r.update(s+"("+t+")",a,{success:l,error:p,urlParameters:o})},delete:function(e,r,s,t,a,o){var i=this;var n=function(r,s){var a=s.headers["sap-message"];if(a&&(JSON.parse(a).severity==="error"||JSON.parse(a).code==="ZPM_MSG/150")){var n={statusCode:"400",statusText:JSON.parse(s.headers["sap-message"]).message};i.error(n,e,o)}else{if(t){t(r,s)}}};var u=function(r){if(a){a(r)}i.error(r,e,o)};r.delete(s,{success:n,error:u})},error:function(e,r,s){var t="";var a=r.getView().getModel("i18n").getResourceBundle();r.getView().setBusy(false);switch(e.statusCode){case 0:t=a.getText("Error");break;case"400":if(e.responseText&&(JSON.parse(e.responseText).error.code.includes("/IWFND/CM_MGW")||JSON.parse(e.responseText).error.code.includes("SY"))){t=JSON.parse(e.responseText).error.message.value}else{t=e.statusText}break;case"403":t=a.getText("Error403");break;case"404":t=a.getText("Error404");break;case"500":t=a.getText("Error500");break;case"504":t=a.getText("Error504");break;default:t=a.getText("ErrorDefault");break}try{sap.m.MessageBox.error(t,{title:"Error",onClose:function(){if(s){s()}},styleClass:"",id:"Error",actions:sap.m.MessageBox.Action.CLOSE,emphasizedAction:null,initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit})}catch(e){console.log("Multiples errror messages")}},errorXS:function(e,r,s,t){var a;var o=e.getView().getModel("i18n").getResourceBundle();if(e){if(e.getView()){e.getView().setBusy(false)}}switch(r.status){case 0:a=o.getText("Error");break;case 403:a=o.getText("Error403");break;case 404:a=o.getText("Error404");break;case 500:a=o.getText("Error500");break;case 504:a=o.getText("Error504");break;default:a=r.responseJSON.response;break}try{sap.m.MessageBox.error(a,{title:"Error",onClose:function(){if(s){s()}},styleClass:"",id:"Error",actions:sap.m.MessageBox.Action.CLOSE,emphasizedAction:null,initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit})}catch(e){console.log("Multiple error messages")}}}});